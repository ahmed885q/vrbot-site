(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[758],{1308:function(e,t,i){Promise.resolve().then(i.bind(i,5481))},5481:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return g}});var n=i(3827),l=i(4090);function s(e){let{label:t,icon:i,bg:l,color:s}=e;return(0,n.jsxs)("span",{style:{display:"inline-flex",alignItems:"center",gap:8,padding:"7px 10px",borderRadius:999,fontSize:12,fontWeight:800,background:l,color:s,border:"1px solid rgba(17,24,39,0.10)",whiteSpace:"nowrap"},children:[(0,n.jsx)("span",{"aria-hidden":"true",children:null!=i?i:"•"}),t]})}function r(e){let{title:t,subtitle:i,children:l,right:s}=e;return(0,n.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:16,background:"#fff",boxShadow:"0 6px 18px rgba(17,24,39,0.06)",overflow:"hidden"},children:[(0,n.jsxs)("div",{style:{padding:14,borderBottom:"1px solid #eef2f7",display:"flex",alignItems:"center",justifyContent:"space-between",gap:10},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontWeight:900},children:t}),i?(0,n.jsx)("div",{style:{marginTop:2,fontSize:12,color:"#6b7280"},children:i}):null]}),s]}),(0,n.jsx)("div",{style:{padding:14},children:l})]})}function o(e){let{left:t,right:i}=e;return(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:14,padding:"10px 0",borderBottom:"1px solid #f1f5f9"},children:[(0,n.jsx)("div",{style:{color:"#111827",fontWeight:700},children:t}),(0,n.jsx)("div",{style:{color:"#374151"},children:i})]})}function a(e){let{children:t,onClick:i,variant:l="primary",disabled:s}=e,r={display:"inline-flex",alignItems:"center",justifyContent:"center",gap:8,padding:"10px 12px",borderRadius:12,fontWeight:800,border:"1px solid transparent",cursor:s?"not-allowed":"pointer",userSelect:"none",opacity:s?.6:1},o="primary"===l?{...r,background:"#111827",color:"#fff"}:"danger"===l?{...r,background:"#dc2626",color:"#fff"}:{...r,background:"#fff",color:"#111827",borderColor:"#e5e7eb"};return(0,n.jsx)("button",{type:"button",style:o,onClick:s?void 0:i,disabled:s,children:t})}function d(e){let{slots:t,trialEndsAt:i,trialActive:o,entError:d,farms:c,farmsLoading:h,farmsError:g,reloadFarms:u,ensureEntitlements:p,onToggleBot:x,onOpenBotSettings:f}=e,[y,b]=(0,l.useState)(""),[j,m]=(0,l.useState)(""),[v,k]=(0,l.useState)(""),[D,S]=(0,l.useState)(!1),[C,W]=(0,l.useState)(null),[w,A]=(0,l.useState)(!1),[E,T]=(0,l.useState)({});async function B(){let e=y.trim();if(!e){W("Farm name is required");return}S(!0),W(null),A(!1);try{let t=await fetch("/api/farms/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,server:j.trim()||null,notes:v.trim()||null,bot_settings:{security:{antiDetection:!0,randomDelays:!0,maxActionsPerHour:180,humanizeMouse:!0,avoidPatterns:!0},automation:{autoFarm:!0,autoBuild:!0,targetLevel:17,priorityBuilding:"hall"}}})}),i=await t.json().catch(()=>({}));if(!t.ok)throw Error((null==i?void 0:i.error)||"Failed to create farm");A(!0),b(""),m(""),k(""),await u()}catch(e){W((null==e?void 0:e.message)||"Farm creation error")}finally{S(!1)}}async function F(e){if(confirm("Delete this farm? This cannot be undone."))try{if(!(await fetch("/api/farms/delete?id=".concat(encodeURIComponent(e)),{method:"DELETE"})).ok)throw Error("Failed to delete farm");await u()}catch(e){alert("Failed to delete farm")}}async function R(e,t){T(t=>({...t,[e]:!0}));try{if(x)await x(e,!t);else if(!(await fetch("/api/farms/".concat(e,"/bot/toggle"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:!t})})).ok)throw Error("Failed to toggle bot");await u()}catch(e){console.error("Failed to toggle bot:",e),alert("Failed to toggle bot. Please try again.")}finally{T(t=>({...t,[e]:!1}))}}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r,{title:"Plan & Limits",subtitle:"Your current subscription allowances",right:(0,n.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,n.jsx)(a,{variant:"ghost",onClick:p,children:"\uD83D\uDD04 Refresh"}),null!==t&&c.length>=t&&(0,n.jsx)(a,{variant:"primary",onClick:()=>window.open("/pricing","_blank"),children:"⭐ Upgrade Plan"})]}),children:[d?(0,n.jsxs)("div",{style:{color:"#ef4444",fontWeight:700,marginBottom:12},children:["Error: ",d]}):null,(0,n.jsxs)("div",{style:{display:"grid",gap:10},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:14,padding:"10px 0",borderBottom:"1px solid #f1f5f9"},children:[(0,n.jsx)("div",{style:{color:"#111827",fontWeight:700},children:"Farm Slots"}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,n.jsxs)("span",{style:{fontWeight:900},children:[c.length,null!==t?" / ".concat(t):""]}),null!==t&&c.length>=t?(0,n.jsx)(s,{label:"FULL",icon:"⚠️",bg:"#fee2e2",color:"#991b1b"}):(0,n.jsx)(s,{label:"AVAILABLE",icon:"✅",bg:"#dcfce7",color:"#166534"})]})]}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:14,padding:"10px 0",borderBottom:"1px solid #f1f5f9"},children:[(0,n.jsx)("div",{style:{color:"#111827",fontWeight:700},children:"Active Bots"}),(0,n.jsxs)("div",{style:{fontWeight:900},children:[c.filter(e=>e.bot_enabled).length," / ",c.length]})]}),null!==o?(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:14,padding:"10px 0",borderBottom:"1px solid #f1f5f9"},children:[(0,n.jsx)("div",{style:{color:"#111827",fontWeight:700},children:"Trial Status"}),(0,n.jsx)("div",{children:o?(0,n.jsx)(s,{label:"ACTIVE",icon:"⏳",bg:"#e0f2fe",color:"#075985"}):(0,n.jsx)(s,{label:"ENDED",icon:"⏹️",bg:"#f3f4f6",color:"#374151"})})]}):null,i?(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:14,padding:"10px 0"},children:[(0,n.jsx)("div",{style:{color:"#111827",fontWeight:700},children:"Trial Ends"}),(0,n.jsx)("div",{style:{color:"#374151"},children:i})]}):null]})]}),(0,n.jsx)(r,{title:"Create New Farm",subtitle:"Add a new Viking Rise account",children:(0,n.jsxs)("div",{style:{display:"grid",gap:12},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontWeight:700,marginBottom:6},children:"Farm Name *"}),(0,n.jsx)("input",{value:y,onChange:e=>b(e.target.value),placeholder:"e.g., My Main Account",style:{width:"100%",padding:"10px 12px",borderRadius:12,border:"1px solid #e5e7eb",outline:"none",fontWeight:700}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontWeight:700,marginBottom:6},children:"Server (optional)"}),(0,n.jsx)("input",{value:j,onChange:e=>m(e.target.value),placeholder:"e.g., NA-123",style:{width:"100%",padding:"10px 12px",borderRadius:12,border:"1px solid #e5e7eb",outline:"none",fontWeight:700}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontWeight:700,marginBottom:6},children:"Notes (optional)"}),(0,n.jsx)("textarea",{value:v,onChange:e=>k(e.target.value),placeholder:"Any notes for this farm...",style:{width:"100%",minHeight:80,padding:"10px 12px",borderRadius:12,border:"1px solid #e5e7eb",outline:"none",fontWeight:700,resize:"vertical"}})]}),(0,n.jsxs)("div",{style:{marginTop:8},children:[(0,n.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,n.jsx)("input",{type:"checkbox",defaultChecked:!0}),(0,n.jsx)("span",{style:{fontWeight:700},children:"Enable bot with default settings"})]}),(0,n.jsx)("div",{style:{fontSize:12,color:"#6b7280",marginTop:4},children:"Includes: Anti-Detection, Auto-Farming, Auto-Build to level 17"})]}),C?(0,n.jsxs)("div",{style:{color:"#ef4444",fontWeight:700},children:["Error: ",C]}):null,w?(0,n.jsx)("div",{style:{color:"#16a34a",fontWeight:700},children:"✅ Farm created successfully!"}):null,(0,n.jsxs)("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[(0,n.jsx)(a,{onClick:B,disabled:D||null!==t&&c.length>=t,children:D?"Creating...":"➕ Create Farm"}),null!==t&&c.length>=t?(0,n.jsx)("div",{style:{color:"#ef4444",fontWeight:700,fontSize:13},children:"⚠️ Upgrade plan to add more farms"}):null]})]})}),(0,n.jsxs)(r,{title:"Your Farms",subtitle:"All connected Viking Rise accounts",right:(0,n.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,n.jsx)(a,{variant:"ghost",onClick:u,children:"\uD83D\uDD04 Refresh"}),c.length>0&&(0,n.jsx)(a,{variant:"primary",onClick:()=>console.log("Export farms"),children:"\uD83D\uDCE4 Export"})]}),children:[h?(0,n.jsx)("div",{style:{textAlign:"center",padding:20,color:"#6b7280"},children:"Loading farms..."}):g?(0,n.jsxs)("div",{style:{color:"#ef4444",fontWeight:700,textAlign:"center",padding:20},children:["Error: ",g]}):0===c.length?(0,n.jsx)("div",{style:{textAlign:"center",padding:20,color:"#6b7280"},children:"No farms yet. Create your first farm above."}):(0,n.jsx)("div",{style:{display:"grid",gap:10},children:c.map(e=>{var t,i,l,r,o,a;let d=e.bot_enabled||!1,c=E[e.id]||!1;return(0,n.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:14,padding:14,background:"#f8fafc",borderLeft:"4px solid ".concat(d?"#10b981":"#6b7280")},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:10},children:[(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[(0,n.jsx)("div",{style:{fontWeight:900,fontSize:16},children:e.name}),d&&(0,n.jsx)(s,{label:"BOT ACTIVE",icon:"\uD83E\uDD16",bg:"#dcfce7",color:"#166534"})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:10,marginTop:6,fontSize:13,flexWrap:"wrap"},children:[e.server?(0,n.jsxs)("span",{style:{color:"#6b7280",fontWeight:700},children:["\uD83D\uDDA5️ Server: ",e.server]}):null,(0,n.jsxs)("span",{style:{color:"#6b7280",fontWeight:700},children:["\uD83D\uDCC5 Created: ",new Date(e.created_at).toLocaleDateString()]}),e.last_active&&(0,n.jsxs)("span",{style:{color:"#6b7280",fontWeight:700},children:["⏰ Last active: ",new Date(e.last_active).toLocaleDateString()]})]}),e.notes?(0,n.jsxs)("div",{style:{marginTop:8,color:"#4b5563",fontWeight:700,fontSize:13},children:["\uD83D\uDCDD ",e.notes]}):null]}),(0,n.jsxs)("div",{style:{display:"flex",gap:8,flexShrink:0},children:[(0,n.jsx)("button",{onClick:()=>R(e.id,d),disabled:c,style:{padding:"8px 12px",borderRadius:10,border:"1px solid ".concat(d?"#fca5a5":"#a7f3d0"),background:d?"#fee2e2":"#dcfce7",color:d?"#991b1b":"#166534",fontWeight:900,fontSize:13,cursor:"pointer",display:"flex",alignItems:"center",gap:6,minWidth:100,justifyContent:"center",opacity:c?.6:1},children:c?"...":(0,n.jsx)(n.Fragment,{children:d?"⏹️ Stop Bot":"\uD83E\uDD16 Start Bot"})}),(0,n.jsx)("button",{onClick:()=>{var t;return t=e.id,void(f?f(t):window.location.href="/farm/".concat(t,"/settings"))},style:{padding:"8px 12px",borderRadius:10,border:"1px solid #93c5fd",background:"#dbeafe",color:"#1e40af",fontWeight:900,fontSize:13,cursor:"pointer",display:"flex",alignItems:"center",gap:6},children:"⚙️ Settings"}),(0,n.jsx)("button",{onClick:()=>F(e.id),style:{padding:"8px 12px",borderRadius:10,border:"1px solid #fca5a5",background:"#fee2e2",color:"#991b1b",fontWeight:900,fontSize:13,cursor:"pointer"},children:"Delete"})]})]}),e.bot_settings&&(0,n.jsxs)("div",{style:{marginTop:12,padding:10,background:"#f0f9ff",borderRadius:8,border:"1px solid #e0f2fe"},children:[(0,n.jsx)("div",{style:{fontWeight:900,fontSize:13,color:"#075985",marginBottom:4},children:"Bot Settings:"}),(0,n.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[(null===(t=e.bot_settings.security)||void 0===t?void 0:t.antiDetection)&&(0,n.jsx)(s,{label:"Anti-Detection",icon:"\uD83D\uDEE1️",bg:"#fff7ed",color:"#9a3412"}),(null===(i=e.bot_settings.automation)||void 0===i?void 0:i.autoFarm)&&(0,n.jsx)(s,{label:"Auto-Farm",icon:"\uD83C\uDF3E",bg:"#dcfce7",color:"#166534"}),(null===(l=e.bot_settings.automation)||void 0===l?void 0:l.autoBuild)&&(0,n.jsx)(s,{label:"Build to L".concat(e.bot_settings.automation.targetLevel||17),icon:"\uD83C\uDFD7️",bg:"#dbeafe",color:"#1e40af"}),(null===(r=e.bot_settings.combat)||void 0===r?void 0:r.huntMonsters)&&(0,n.jsx)(s,{label:"Monster Hunt",icon:"⚔️",bg:"#fee2e2",color:"#991b1b"})]})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:10,marginTop:12,flexWrap:"wrap"},children:[(0,n.jsx)(s,{label:"Viking Rise",icon:"\uD83C\uDFAE",bg:"#dbeafe",color:"#1e40af"}),(0,n.jsx)(s,{label:e.bot_enabled?"Auto Mode":"Manual Mode",icon:e.bot_enabled?"\uD83E\uDD16":"\uD83D\uDC68‍\uD83D\uDCBB",bg:e.bot_enabled?"#dcfce7":"#f3f4f6",color:e.bot_enabled?"#166534":"#374151"}),(null===(a=e.bot_settings)||void 0===a?void 0:null===(o=a.ai)||void 0===o?void 0:o.enabled)&&(0,n.jsx)(s,{label:"AI Enabled",icon:"\uD83E\uDDE0",bg:"#f3e8ff",color:"#7c3aed"})]})]},e.id)})}),(0,n.jsx)("div",{style:{marginTop:14,padding:12,background:"#f0f9ff",borderRadius:12,border:"1px solid #e0f2fe"},children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontWeight:900,fontSize:14},children:"Quick Actions"}),(0,n.jsx)("div",{style:{fontSize:12,color:"#6b7280",fontWeight:700},children:"Manage all your farms at once"})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,n.jsx)(a,{variant:"ghost",onClick:()=>{let e=c.filter(e=>e.bot_enabled);e.length>0&&confirm("Stop bot on ".concat(e.length," farms?"))&&e.forEach(e=>R(e.id,!0))},children:"⏹️ Stop All Bots"}),(0,n.jsx)(a,{variant:"ghost",onClick:()=>{let e=c.filter(e=>!e.bot_enabled);e.length>0&&confirm("Start bot on ".concat(e.length," farms?"))&&e.forEach(e=>R(e.id,!1))},children:"\uD83E\uDD16 Start All Bots"})]})]})}),(0,n.jsxs)("div",{style:{marginTop:14,fontSize:12,color:"#6b7280",fontWeight:700},children:["✅ Total: ",c.length," farms • \uD83E\uDD16 Active bots: ",c.filter(e=>e.bot_enabled).length,"• \uD83C\uDFAE Manual: ",c.filter(e=>!e.bot_enabled).length]})]})]})}function c(e){let{deviceToken:t,setDeviceToken:i,deviceBusy:s,setDeviceBusy:o,deviceError:d,setDeviceError:c}=e,[h,g]=(0,l.useState)(!1);async function u(){o(!0),c(null),g(!1);try{let e=await fetch("/api/devices/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({purpose:"Viking Rise Bot Access"})}),t=await e.json().catch(()=>({}));if(!e.ok)throw Error((null==t?void 0:t.error)||"Failed to create device token");i((null==t?void 0:t.token)||null)}catch(e){c((null==e?void 0:e.message)||"Device token creation error")}finally{o(!1)}}async function p(){if(t&&confirm("Revoke this token? It will stop working immediately.")){o(!0);try{if(!(await fetch("/api/devices/revoke",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})})).ok)throw Error("Failed to revoke token");i(null),g(!1)}catch(e){alert("Failed to revoke token")}finally{o(!1)}}}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r,{title:"Device Token",subtitle:"For bot authentication (one per device)",children:(0,n.jsxs)("div",{style:{display:"grid",gap:14},children:[(0,n.jsx)("div",{style:{color:"#374151",fontWeight:700},children:"Use this token to authenticate your bot client. Keep it secret!"}),d?(0,n.jsxs)("div",{style:{color:"#ef4444",fontWeight:700},children:["Error: ",d]}):null,t?(0,n.jsxs)("div",{style:{display:"grid",gap:10},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontWeight:700,marginBottom:6},children:"Your Token:"}),(0,n.jsx)("div",{style:{padding:"12px 14px",borderRadius:12,border:"1px solid #e5e7eb",background:"#f8fafc",fontFamily:"ui-monospace, SFMono-Regular, Menlo, monospace",fontSize:13,wordBreak:"break-all",fontWeight:700},children:t})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[(0,n.jsx)(a,{onClick:function(){t&&navigator.clipboard.writeText(t).then(()=>{g(!0),setTimeout(()=>g(!1),2e3)}).catch(()=>{alert("Failed to copy token")})},children:h?"✅ Copied!":"\uD83D\uDCCB Copy Token"}),(0,n.jsx)(a,{variant:"danger",onClick:p,disabled:s,children:"\uD83D\uDD12 Revoke Token"})]}),(0,n.jsx)("div",{style:{fontSize:12,color:"#6b7280",fontWeight:700},children:"⚠️ This token will be shown only once. Save it securely."})]}):(0,n.jsxs)("div",{style:{display:"grid",gap:10},children:[(0,n.jsx)("div",{style:{color:"#6b7280",fontWeight:700},children:"No active token. Generate one to connect your bot."}),(0,n.jsx)("div",{style:{display:"flex",gap:10},children:(0,n.jsx)(a,{onClick:u,disabled:s,children:s?"Generating...":"\uD83D\uDD11 Generate New Token"})})]}),(0,n.jsxs)("div",{style:{marginTop:10,padding:12,borderRadius:14,border:"1px solid #e5e7eb",background:"#f8fafc"},children:[(0,n.jsx)("div",{style:{fontWeight:900,marginBottom:6},children:"Usage Instructions:"}),(0,n.jsxs)("ol",{style:{marginLeft:20,fontSize:13,color:"#374151",fontWeight:700},children:[(0,n.jsx)("li",{children:"Generate a token above"}),(0,n.jsx)("li",{children:"Copy it to your bot configuration"}),(0,n.jsxs)("li",{children:["Use in bot client: ",(0,n.jsxs)("code",{children:["Authorization: Bearer ","{token}"]})]}),(0,n.jsx)("li",{children:"Revoke if compromised or no longer needed"})]})]})]})}),(0,n.jsxs)(r,{title:"Connected Devices",subtitle:"Active bot sessions",children:[(0,n.jsxs)("div",{style:{textAlign:"center",padding:20,color:"#6b7280",fontWeight:700},children:["No active bot connections detected.",t?" Generate and use a token above to connect.":" Generate a token first."]}),(0,n.jsx)("div",{style:{display:"grid",gap:10},children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 14px",border:"1px solid #e5e7eb",borderRadius:12,background:"#fff"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontWeight:900},children:"Example Bot Client"}),(0,n.jsx)("div",{style:{fontSize:12,color:"#6b7280",fontWeight:700},children:"Last seen: Never"})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,n.jsx)("span",{style:{fontSize:12,padding:"4px 8px",background:"#f3f4f6",borderRadius:6,fontWeight:800},children:"OFFLINE"}),(0,n.jsx)("button",{style:{padding:"6px 10px",borderRadius:8,border:"1px solid #fca5a5",background:"#fee2e2",color:"#991b1b",fontWeight:800,fontSize:12,cursor:"pointer"},children:"Disconnect"})]})]})}),(0,n.jsx)("div",{style:{marginTop:14,fontSize:12,color:"#6b7280",fontWeight:700},children:"Note: Device connections are for manual bot clients. No automation server included."})]}),(0,n.jsx)(r,{title:"Security Notes",subtitle:"Best practices for token safety",children:(0,n.jsxs)("div",{style:{display:"grid",gap:10},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:10},children:[(0,n.jsx)("span",{style:{fontSize:20},children:"\uD83D\uDD10"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontWeight:900},children:"Keep Tokens Secret"}),(0,n.jsx)("div",{style:{fontSize:13,color:"#6b7280",fontWeight:700},children:"Treat tokens like passwords. Never share in public code or chats."})]})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:10},children:[(0,n.jsx)("span",{style:{fontSize:20},children:"\uD83D\uDD04"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontWeight:900},children:"Regular Rotation"}),(0,n.jsx)("div",{style:{fontSize:13,color:"#6b7280",fontWeight:700},children:"Revoke old tokens and generate new ones periodically."})]})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:10},children:[(0,n.jsx)("span",{style:{fontSize:20},children:"\uD83D\uDCF1"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontWeight:900},children:"One Token Per Device"}),(0,n.jsx)("div",{style:{fontSize:13,color:"#6b7280",fontWeight:700},children:"Use separate tokens for different bots or devices."})]})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:10},children:[(0,n.jsx)("span",{style:{fontSize:20},children:"\uD83D\uDEAB"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontWeight:900},children:"Revoke When Compromised"}),(0,n.jsx)("div",{style:{fontSize:13,color:"#6b7280",fontWeight:700},children:"Immediately revoke any token you suspect is compromised."})]})]})]})})]})}function h(e){let{farms:t,selectedFarmId:i,setSelectedFarmId:l,logs:s,logsLoading:o,logsError:d,reloadLogs:c}=e,h=e=>{let t={padding:"3px 8px",borderRadius:6,fontSize:11,fontWeight:900,textTransform:"uppercase"};switch(e.toLowerCase()){case"error":return{...t,background:"#fee2e2",color:"#991b1b"};case"warning":return{...t,background:"#fef3c7",color:"#92400e"};case"success":return{...t,background:"#dcfce7",color:"#166534"};default:return{...t,background:"#e5e7eb",color:"#374151"}}},g=e=>new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),u=async()=>{if(confirm("Clear all logs? This cannot be undone."))try{(await fetch("/api/logs/clear",{method:"POST"})).ok&&await c(i)}catch(e){alert("Failed to clear logs")}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r,{title:"Activity Logs",subtitle:"System and bot activity records",right:(0,n.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,n.jsx)(a,{variant:"ghost",onClick:()=>c(i),children:"\uD83D\uDD04 Refresh"}),(0,n.jsx)(a,{variant:"danger",onClick:u,children:"\uD83D\uDDD1️ Clear All"})]}),children:[(0,n.jsxs)("div",{style:{display:"flex",gap:10,alignItems:"center",marginBottom:14},children:[(0,n.jsx)("div",{style:{fontWeight:700},children:"Filter by Farm:"}),(0,n.jsxs)("select",{value:i,onChange:e=>{l(e.target.value),c(e.target.value)},style:{padding:"8px 12px",borderRadius:10,border:"1px solid #e5e7eb",background:"#fff",fontWeight:700,cursor:"pointer"},children:[(0,n.jsx)("option",{value:"all",children:"All Farms"}),t.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,n.jsxs)("div",{style:{marginLeft:"auto",display:"flex",gap:8},children:[(0,n.jsx)("span",{style:h("info"),children:"Info"}),(0,n.jsx)("span",{style:h("success"),children:"Success"}),(0,n.jsx)("span",{style:h("warning"),children:"Warning"}),(0,n.jsx)("span",{style:h("error"),children:"Error"})]})]}),o?(0,n.jsx)("div",{style:{textAlign:"center",padding:40,color:"#6b7280",fontWeight:700},children:"Loading logs..."}):d?(0,n.jsxs)("div",{style:{textAlign:"center",padding:40,color:"#ef4444",fontWeight:700},children:["Error: ",d]}):0===s.length?(0,n.jsx)("div",{style:{textAlign:"center",padding:40,color:"#6b7280",fontWeight:700},children:"No logs found. Activity will appear here."}):(0,n.jsx)("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,overflow:"hidden",maxHeight:500,overflowY:"auto"},children:(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{style:{background:"#f8fafc",borderBottom:"1px solid #e5e7eb"},children:[(0,n.jsx)("th",{style:{padding:"12px 14px",textAlign:"left",fontWeight:900,fontSize:13},children:"Time"}),(0,n.jsx)("th",{style:{padding:"12px 14px",textAlign:"left",fontWeight:900,fontSize:13},children:"Level"}),(0,n.jsx)("th",{style:{padding:"12px 14px",textAlign:"left",fontWeight:900,fontSize:13},children:"Farm"}),(0,n.jsx)("th",{style:{padding:"12px 14px",textAlign:"left",fontWeight:900,fontSize:13},children:"Message"})]})}),(0,n.jsx)("tbody",{children:s.map(e=>{let i=t.find(t=>t.id===e.farm_id);return(0,n.jsxs)("tr",{style:{borderBottom:"1px solid #f1f5f9",background:"error"===e.level?"#fef2f2":"#fff"},children:[(0,n.jsx)("td",{style:{padding:"12px 14px",fontSize:13,fontWeight:700,color:"#6b7280"},children:g(e.created_at)}),(0,n.jsx)("td",{style:{padding:"12px 14px"},children:(0,n.jsx)("span",{style:h(e.level),children:e.level})}),(0,n.jsx)("td",{style:{padding:"12px 14px",fontSize:13,fontWeight:700},children:i?i.name:"System"}),(0,n.jsx)("td",{style:{padding:"12px 14px",fontSize:13,fontWeight:700,color:"#111827"},children:e.message})]},e.id)})})]})}),(0,n.jsxs)("div",{style:{marginTop:14,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsxs)("div",{style:{fontSize:12,color:"#6b7280",fontWeight:700},children:["Showing ",s.length," log entries"]}),(0,n.jsx)("div",{style:{fontSize:12,color:"#6b7280",fontWeight:700},children:"Auto-refresh: Off"})]})]}),(0,n.jsxs)(r,{title:"Log Statistics",subtitle:"Activity summary",children:[(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:14},children:[(0,n.jsxs)("div",{style:{textAlign:"center",padding:14,border:"1px solid #e5e7eb",borderRadius:12},children:[(0,n.jsx)("div",{style:{fontSize:24,fontWeight:950},children:s.length}),(0,n.jsx)("div",{style:{fontSize:12,color:"#6b7280",fontWeight:700},children:"Total Logs"})]}),(0,n.jsxs)("div",{style:{textAlign:"center",padding:14,border:"1px solid #e5e7eb",borderRadius:12},children:[(0,n.jsx)("div",{style:{fontSize:24,fontWeight:950,color:"#991b1b"},children:s.filter(e=>"error"===e.level).length}),(0,n.jsx)("div",{style:{fontSize:12,color:"#6b7280",fontWeight:700},children:"Errors"})]}),(0,n.jsxs)("div",{style:{textAlign:"center",padding:14,border:"1px solid #e5e7eb",borderRadius:12},children:[(0,n.jsx)("div",{style:{fontSize:24,fontWeight:950,color:"#92400e"},children:s.filter(e=>"warning"===e.level).length}),(0,n.jsx)("div",{style:{fontSize:12,color:"#6b7280",fontWeight:700},children:"Warnings"})]}),(0,n.jsxs)("div",{style:{textAlign:"center",padding:14,border:"1px solid #e5e7eb",borderRadius:12},children:[(0,n.jsx)("div",{style:{fontSize:24,fontWeight:950,color:"#166534"},children:s.filter(e=>"success"===e.level).length}),(0,n.jsx)("div",{style:{fontSize:12,color:"#6b7280",fontWeight:700},children:"Success"})]})]}),(0,n.jsxs)("div",{style:{marginTop:14},children:[(0,n.jsx)("div",{style:{fontWeight:900,marginBottom:8},children:"Recent Activity Pattern:"}),(0,n.jsx)("div",{style:{height:60,background:"#f8fafc",border:"1px solid #e5e7eb",borderRadius:10,padding:10},children:0===s.length?(0,n.jsx)("div",{style:{textAlign:"center",color:"#6b7280",fontWeight:700,lineHeight:"40px"},children:"No activity data"}):(0,n.jsx)("div",{style:{display:"flex",alignItems:"flex-end",gap:4,height:"100%"},children:[...Array(24)].map((e,t)=>{let i=s.filter(e=>new Date(e.created_at).getHours()===t).length,l=Math.min(40,i/Math.max(...[...Array(24)].map((e,t)=>s.filter(e=>new Date(e.created_at).getHours()===t).length))*40);return(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[(0,n.jsx)("div",{style:{width:"100%",height:"".concat(l,"px"),background:i>0?"#3b82f6":"#e5e7eb",borderRadius:3}}),(0,n.jsx)("div",{style:{fontSize:10,color:"#6b7280",marginTop:4},children:t})]},t)})})}),(0,n.jsx)("div",{style:{fontSize:11,color:"#6b7280",textAlign:"center",marginTop:6,fontWeight:700},children:"Hour of day (0-23)"})]})]}),(0,n.jsx)(r,{title:"Export Logs",subtitle:"Download or backup activity data",children:(0,n.jsxs)("div",{style:{display:"grid",gap:12},children:[(0,n.jsx)("div",{style:{fontWeight:700,color:"#374151"},children:"Export your logs for analysis or backup:"}),(0,n.jsxs)("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[(0,n.jsx)(a,{variant:"ghost",children:"\uD83D\uDCE5 Export as JSON"}),(0,n.jsx)(a,{variant:"ghost",children:"\uD83D\uDCCA Export as CSV"}),(0,n.jsx)(a,{variant:"ghost",children:"\uD83D\uDCCB Copy to Clipboard"})]}),(0,n.jsxs)("div",{style:{padding:12,borderRadius:12,border:"1px solid #e5e7eb",background:"#f8fafc",fontSize:13,color:"#374151",fontWeight:700},children:[(0,n.jsx)("div",{style:{fontWeight:900,marginBottom:6},children:"Export Options:"}),(0,n.jsxs)("ul",{style:{marginLeft:20},children:[(0,n.jsx)("li",{children:"JSON: For programmatic analysis"}),(0,n.jsx)("li",{children:"CSV: For spreadsheet import"}),(0,n.jsx)("li",{children:"Text: For plain text review"}),(0,n.jsx)("li",{children:"Filtered: Export only selected farm or level"})]})]}),(0,n.jsx)("div",{style:{fontSize:12,color:"#6b7280",fontWeight:700},children:"Note: Exports include all logs visible with current filter settings."})]})})]})}function g(e){let{email:t,userId:i,plan:r,status:o}=e,[g,v]=(0,l.useState)("overview"),[k,D]=(0,l.useState)(null),[S,C]=(0,l.useState)(null),[W,w]=(0,l.useState)(null),[A,E]=(0,l.useState)(null),[T,B]=(0,l.useState)([]),[F,R]=(0,l.useState)(!1),[I,z]=(0,l.useState)(null),[M,L]=(0,l.useState)(null),[N,P]=(0,l.useState)(!1),[_,O]=(0,l.useState)(null),[G,H]=(0,l.useState)([]),[U,V]=(0,l.useState)(!1),[J,q]=(0,l.useState)(null),[K,Q]=(0,l.useState)("all"),[Y,X]=(0,l.useState)({security:{antiDetection:!0,randomDelays:!0,maxActionsPerHour:180,useProxy:!1,proxyAddress:"",humanizeMouse:!0,avoidPatterns:!0},automation:{autoFarm:!0,autoBuild:!0,autoResearch:!0,autoUpgrade:!0,targetLevel:17,priorityBuilding:"hall",upgradeQueue:["hall","barracks","farm","hospital","wall"]},resources:{gatherWood:!0,gatherFood:!0,gatherStone:!0,gatherGold:!1,autoCollect:!0,minResourceThreshold:1e4},combat:{huntMonsters:!0,monsterStrength:"weak",autoJoinRallies:!0,supportAllies:!0,autoHeal:!0,crowdSupport:!0,troopPresets:["attack1","defense1","gather1"]},messaging:{autoSendGifts:!0,giftMessage:"From your alliance friend!",recipients:[],checkMail:!0,replyToAlliance:!0},ai:{enabled:!0,learningMode:!0,optimizeStrategy:!0,predictAttacks:!0,autoAdjust:!0,visionModel:"hybrid"},scheduling:{enabled:!1,startTime:"09:00",endTime:"23:00",pauseDuringEvents:!0,stopOnLowResources:!0}}),[Z,$]=(0,l.useState)("stopped"),[ee,et]=(0,l.useState)({actionsToday:0,resourcesGathered:0,monstersKilled:0,giftsSent:0,uptime:"0h 0m"}),ei=(0,l.useMemo)(()=>{let e=String(r||"free").toLowerCase();return"pro"===e?{label:"PRO",icon:"⚡",bg:"#dcfce7",color:"#166534"}:"trial"===e?{label:"TRIAL",icon:"⏳",bg:"#e0f2fe",color:"#075985"}:{label:"FREE",icon:"\uD83E\uDDEA",bg:"#f3f4f6",color:"#374151"}},[r]),en=(0,l.useMemo)(()=>{let e=String(o||"").toLowerCase();return"active"===e?{label:"ACTIVE",icon:"✅",bg:"#dcfce7",color:"#166534"}:"trialing"===e?{label:"TRIALING",icon:"⏳",bg:"#e0f2fe",color:"#075985"}:"canceled"===e?{label:"CANCELED",icon:"\uD83D\uDED1",bg:"#fee2e2",color:"#991b1b"}:{label:String(o||"—").toUpperCase(),icon:"•",bg:"#f3f4f6",color:"#374151"}},[o]),el=(0,l.useMemo)(()=>"running"===Z?{label:"BOT RUNNING",icon:"\uD83E\uDD16",bg:"#dcfce7",color:"#166534"}:"paused"===Z?{label:"BOT PAUSED",icon:"⏸️",bg:"#fef3c7",color:"#92400e"}:{label:"BOT STOPPED",icon:"\uD83D\uDED1",bg:"#fee2e2",color:"#991b1b"},[Z]);async function es(){E(null);try{var e,t;let i=await fetch("/api/entitlements/ensure",{cache:"no-store"}),n=await i.json().catch(()=>({}));if(!i.ok)throw Error((null==n?void 0:n.error)||"Failed to ensure entitlements");D(null!==(e=null==n?void 0:n.farm_slots)&&void 0!==e?e:null),C(null!==(t=null==n?void 0:n.trial_ends_at)&&void 0!==t?t:null),w(!!(null==n?void 0:n.trialActive))}catch(e){E((null==e?void 0:e.message)||"Entitlements error")}}async function er(){R(!0),z(null);try{let e=await fetch("/api/farms/list",{cache:"no-store"}),t=await e.json().catch(()=>({}));if(!e.ok)throw Error((null==t?void 0:t.error)||"Failed to load farms");B((null==t?void 0:t.farms)||[])}catch(e){z((null==e?void 0:e.message)||"Farms error")}finally{R(!1)}}async function eo(e){V(!0),q(null);try{let t=e&&"all"!==e?"?limit=50&farmId=".concat(encodeURIComponent(e)):"?limit=50",i=await fetch("/api/logs/list".concat(t),{cache:"no-store"}),n=await i.json().catch(()=>({}));if(!i.ok)throw Error((null==n?void 0:n.error)||"Failed to load logs");H((null==n?void 0:n.logs)||[])}catch(e){q((null==e?void 0:e.message)||"Logs error")}finally{V(!1)}}let ea=async()=>{try{(await fetch("/api/bot/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:Y})})).ok&&($("running"),eh("Bot started successfully","success"))}catch(e){eh("Failed to start bot","error")}},ed=async()=>{try{(await fetch("/api/bot/stop",{method:"POST"})).ok&&($("stopped"),eh("Bot stopped","warning"))}catch(e){eh("Failed to stop bot","error")}},ec=async()=>{$("paused"),eh("Bot paused","info")},eh=(e,t)=>{let i={id:G.length+1,farm_id:null,level:t,message:e,created_at:new Date().toISOString()};H(e=>[i,...e.slice(0,49)])};return(0,l.useEffect)(()=>{es(),er(),eo("all")},[]),(0,n.jsx)("div",{style:{minHeight:"100vh",background:"radial-gradient(1200px 500px at 20% 0%, rgba(59,130,246,0.12), transparent), radial-gradient(900px 400px at 80% 0%, rgba(34,197,94,0.10), transparent), #f8fafc"},children:(0,n.jsxs)("div",{style:{maxWidth:980,margin:"0 auto",padding:18},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:14,flexWrap:"wrap"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontSize:32,fontWeight:950,letterSpacing:-.5},children:"VRBOT"}),(0,n.jsx)("div",{style:{marginTop:6,color:"#6b7280",fontWeight:600},children:"Viking Rise assistant dashboard (planning + checklist + guidance)"})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[(0,n.jsx)(s,{...ei}),(0,n.jsx)(s,{...en}),(0,n.jsx)(s,{...el}),(0,n.jsx)(s,{label:"Anti-Panda",icon:"\uD83D\uDEE1️",bg:"#fff7ed",color:"#9a3412"})]})]}),(0,n.jsxs)("div",{style:{marginTop:14,padding:12,borderRadius:16,border:"1px solid #e5e7eb",background:"#fff",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:10},children:[(0,n.jsxs)("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[(0,n.jsx)("div",{style:{fontWeight:900},children:"Bot Control:"}),(0,n.jsx)(a,{onClick:ea,disabled:"running"===Z,children:"▶️ Start Bot"}),(0,n.jsx)(a,{onClick:ed,variant:"danger",disabled:"stopped"===Z,children:"⏹️ Stop Bot"}),(0,n.jsx)(a,{onClick:ec,variant:"ghost",disabled:"running"!==Z,children:"⏸️ Pause"})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:20,fontSize:12},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{color:"#6b7280"},children:"Actions Today"}),(0,n.jsx)("div",{style:{fontWeight:900},children:ee.actionsToday})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{color:"#6b7280"},children:"Uptime"}),(0,n.jsx)("div",{style:{fontWeight:900},children:ee.uptime})]})]})]}),(0,n.jsx)("div",{style:{marginTop:14,display:"flex",gap:8,flexWrap:"wrap"},children:[{key:"overview",label:"Overview",icon:"\uD83C\uDFE0"},{key:"farms",label:"Farms",icon:"\uD83C\uDFE1"},{key:"devices",label:"Devices",icon:"\uD83D\uDDA5️"},{key:"logs",label:"Logs",icon:"\uD83D\uDCDC"},{key:"bot-settings",label:"Bot Settings",icon:"⚙️"},{key:"farming",label:"Farming",icon:"\uD83C\uDF3E"},{key:"build",label:"Build",icon:"\uD83C\uDFD7️"},{key:"rally",label:"Rally",icon:"⚔️"},{key:"resources",label:"Resources",icon:"⛏️"},{key:"mail",label:"Mail & Gifts",icon:"\uD83C\uDF81"},{key:"ai",label:"AI Helper",icon:"\uD83E\uDD16"}].map(e=>(0,n.jsxs)("button",{type:"button",onClick:()=>v(e.key),style:{padding:"10px 12px",borderRadius:14,border:"1px solid #e5e7eb",background:g===e.key?"#111827":"#fff",color:g===e.key?"#fff":"#111827",fontWeight:900,cursor:"pointer",display:"inline-flex",alignItems:"center",gap:8},children:[(0,n.jsx)("span",{"aria-hidden":"true",children:e.icon}),e.label]},e.key))}),(0,n.jsxs)("div",{style:{marginTop:14,display:"grid",gridTemplateColumns:"1fr",gap:12},children:["overview"===g?(0,n.jsx)(u,{email:t,userId:i,botStats:ee}):null,"farms"===g?(0,n.jsx)(d,{slots:k,trialEndsAt:S,trialActive:W,entError:A,farms:T,farmsLoading:F,farmsError:I,reloadFarms:er,ensureEntitlements:es}):null,"devices"===g?(0,n.jsx)(c,{deviceToken:M,setDeviceToken:L,deviceBusy:N,setDeviceBusy:P,deviceError:_,setDeviceError:O}):null,"logs"===g?(0,n.jsx)(h,{farms:T.map(e=>({id:e.id,name:e.name})),selectedFarmId:K,setSelectedFarmId:Q,logs:G,logsLoading:U,logsError:J,reloadLogs:eo}):null,"bot-settings"===g?(0,n.jsx)(p,{settings:Y,updateSetting:(e,t,i)=>{X(n=>({...n,[e]:{...n[e],[t]:i}}))},botStatus:Z}):null,"farming"===g?(0,n.jsx)(x,{settings:Y.automation}):null,"build"===g?(0,n.jsx)(f,{settings:Y.automation}):null,"rally"===g?(0,n.jsx)(y,{settings:Y.combat}):null,"resources"===g?(0,n.jsx)(b,{settings:Y.resources}):null,"mail"===g?(0,n.jsx)(j,{settings:Y.messaging}):null,"ai"===g?(0,n.jsx)(m,{settings:Y.ai}):null]}),(0,n.jsx)("div",{style:{marginTop:14,color:"#6b7280",fontSize:12,fontWeight:700},children:"Note: This UI helps you plan and track tasks. Automation/bypass features are intentionally not included."})]})})}function u(e){let{email:t,userId:i,botStats:l}=e;return(0,n.jsxs)(r,{title:"Account & Bot Status",subtitle:"Basic info and bot statistics",right:(0,n.jsx)("a",{href:"/dashboard",style:{textDecoration:"none",fontWeight:900,padding:"10px 12px",borderRadius:12,border:"1px solid #e5e7eb",background:"#fff",color:"#111827"},children:"↩︎ Dashboard"}),children:[(0,n.jsx)(o,{left:"Email",right:(0,n.jsx)("span",{style:{fontWeight:800},children:t||"—"})}),(0,n.jsx)(o,{left:"User ID",right:(0,n.jsx)("span",{style:{fontFamily:"ui-monospace, SFMono-Regular, Menlo, monospace"},children:i})}),(0,n.jsxs)("div",{style:{marginTop:20,display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:10},children:[(0,n.jsx)(v,{label:"Resources Gathered",value:l.resourcesGathered}),(0,n.jsx)(v,{label:"Monsters Killed",value:l.monstersKilled}),(0,n.jsx)(v,{label:"Gifts Sent",value:l.giftsSent}),(0,n.jsx)(v,{label:"Uptime",value:l.uptime})]}),(0,n.jsxs)("div",{style:{marginTop:10,display:"flex",gap:10,flexWrap:"wrap"},children:[(0,n.jsx)("a",{href:"/",style:{textDecoration:"none",fontWeight:900,padding:"10px 12px",borderRadius:12,border:"1px solid #111827",background:"#111827",color:"#fff"},children:"\uD83C\uDFE0 Home"}),(0,n.jsx)("a",{href:"mailto:ahmed85q@hotmail.com?subject=VRBOT%20Feedback",style:{textDecoration:"none",fontWeight:900,padding:"10px 12px",borderRadius:12,border:"1px solid #e5e7eb",background:"#fff",color:"#111827"},children:"✉️ Feedback"})]})]})}function p(e){let{settings:t,updateSetting:i,botStatus:l}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r,{title:"Security & Anti-Detection",subtitle:"Protection against Panda system",children:(0,n.jsxs)("div",{style:{display:"grid",gap:12},children:[(0,n.jsxs)("label",{style:k(),children:[(0,n.jsx)("input",{type:"checkbox",checked:t.security.antiDetection,onChange:e=>i("security","antiDetection",e.target.checked)}),(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"Anti-detection mode"})," — advanced pattern avoidance"]})]}),(0,n.jsxs)("label",{style:k(),children:[(0,n.jsx)("input",{type:"checkbox",checked:t.security.randomDelays,onChange:e=>i("security","randomDelays",e.target.checked)}),(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"Random delays"})," — unpredictable timing between actions"]})]}),(0,n.jsxs)("label",{style:k(),children:[(0,n.jsx)("input",{type:"checkbox",checked:t.security.humanizeMouse,onChange:e=>i("security","humanizeMouse",e.target.checked)}),(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"Human-like mouse movements"})," — curved paths, variable speed"]})]}),(0,n.jsxs)("label",{style:k(),children:[(0,n.jsx)("input",{type:"checkbox",checked:t.security.avoidPatterns,onChange:e=>i("security","avoidPatterns",e.target.checked)}),(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"Pattern avoidance"})," — prevent repetitive action sequences"]})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,marginTop:10},children:[(0,n.jsx)("div",{style:{fontWeight:700},children:"Max actions per hour:"}),(0,n.jsx)("input",{type:"range",min:"10",max:"500",value:t.security.maxActionsPerHour,onChange:e=>i("security","maxActionsPerHour",parseInt(e.target.value)),style:{flex:1}}),(0,n.jsx)("div",{style:{fontWeight:900},children:t.security.maxActionsPerHour})]})]})}),(0,n.jsx)(r,{title:"Automation Settings",subtitle:"Bot behavior configuration",children:(0,n.jsxs)("div",{style:{display:"grid",gap:12},children:[(0,n.jsxs)("label",{style:k(),children:[(0,n.jsx)("input",{type:"checkbox",checked:t.automation.autoFarm,onChange:e=>i("automation","autoFarm",e.target.checked),disabled:"running"===l}),(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"Auto-farming"})," — automatic resource gathering"]})]}),(0,n.jsxs)("label",{style:k(),children:[(0,n.jsx)("input",{type:"checkbox",checked:t.automation.autoBuild,onChange:e=>i("automation","autoBuild",e.target.checked),disabled:"running"===l}),(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"Auto-building"})," — automatic construction queue"]})]}),(0,n.jsxs)("label",{style:k(),children:[(0,n.jsx)("input",{type:"checkbox",checked:t.automation.autoResearch,onChange:e=>i("automation","autoResearch",e.target.checked),disabled:"running"===l}),(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"Auto-research"})," — automatic technology research"]})]}),(0,n.jsxs)("div",{style:{marginTop:10},children:[(0,n.jsx)("div",{style:{fontWeight:700,marginBottom:8},children:"Target Level:"}),(0,n.jsxs)("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[(0,n.jsx)("input",{type:"range",min:"1",max:"25",value:t.automation.targetLevel,onChange:e=>i("automation","targetLevel",parseInt(e.target.value)),style:{flex:1}}),(0,n.jsx)("div",{style:{fontSize:20,fontWeight:950},children:t.automation.targetLevel})]})]}),(0,n.jsxs)("div",{style:{marginTop:10},children:[(0,n.jsx)("div",{style:{fontWeight:700,marginBottom:8},children:"Building Priority:"}),(0,n.jsxs)("select",{value:t.automation.priorityBuilding,onChange:e=>i("automation","priorityBuilding",e.target.value),style:{width:"100%",padding:"10px 12px",borderRadius:12,border:"1px solid #e5e7eb",fontWeight:700},children:[(0,n.jsx)("option",{value:"hall",children:"Main Hall"}),(0,n.jsx)("option",{value:"barracks",children:"Barracks"}),(0,n.jsx)("option",{value:"hospital",children:"Hospital"}),(0,n.jsx)("option",{value:"wall",children:"Wall"}),(0,n.jsx)("option",{value:"farm",children:"Farm"}),(0,n.jsx)("option",{value:"market",children:"Market"})]})]})]})}),(0,n.jsx)(r,{title:"Combat & Rally Settings",subtitle:"Monster hunting and alliance support",children:(0,n.jsxs)("div",{style:{display:"grid",gap:12},children:[(0,n.jsxs)("label",{style:k(),children:[(0,n.jsx)("input",{type:"checkbox",checked:t.combat.huntMonsters,onChange:e=>i("combat","huntMonsters",e.target.checked)}),(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"Auto-hunt monsters"})," — automatically attack monsters"]})]}),(0,n.jsxs)("label",{style:k(),children:[(0,n.jsx)("input",{type:"checkbox",checked:t.combat.autoJoinRallies,onChange:e=>i("combat","autoJoinRallies",e.target.checked)}),(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"Auto-join rallies"})," — automatically participate in alliance rallies"]})]}),(0,n.jsxs)("label",{style:k(),children:[(0,n.jsx)("input",{type:"checkbox",checked:t.combat.crowdSupport,onChange:e=>i("combat","crowdSupport",e.target.checked)}),(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"Crowd support"})," — send reinforcements to allies"]})]}),(0,n.jsxs)("div",{style:{marginTop:10},children:[(0,n.jsx)("div",{style:{fontWeight:700,marginBottom:8},children:"Monster Strength:"}),(0,n.jsx)("div",{style:{display:"flex",gap:8},children:["weak","medium","strong"].map(e=>(0,n.jsx)("button",{type:"button",onClick:()=>i("combat","monsterStrength",e),style:{padding:"8px 12px",borderRadius:12,border:"1px solid ".concat(t.combat.monsterStrength===e?"#111827":"#e5e7eb"),background:t.combat.monsterStrength===e?"#111827":"#fff",color:t.combat.monsterStrength===e?"#fff":"#111827",fontWeight:800,cursor:"pointer"},children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]})}),(0,n.jsx)(r,{title:"AI Integration",subtitle:"Advanced AI features",children:(0,n.jsxs)("div",{style:{display:"grid",gap:12},children:[(0,n.jsxs)("label",{style:k(),children:[(0,n.jsx)("input",{type:"checkbox",checked:t.ai.enabled,onChange:e=>i("ai","enabled",e.target.checked)}),(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"AI Enabled"})," — use AI for decision making"]})]}),(0,n.jsxs)("label",{style:k(),children:[(0,n.jsx)("input",{type:"checkbox",checked:t.ai.learningMode,onChange:e=>i("ai","learningMode",e.target.checked)}),(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"Learning mode"})," — improve over time based on results"]})]}),(0,n.jsxs)("label",{style:k(),children:[(0,n.jsx)("input",{type:"checkbox",checked:t.ai.predictAttacks,onChange:e=>i("ai","predictAttacks",e.target.checked)}),(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"Attack prediction"})," — predict enemy attacks and prepare defenses"]})]}),(0,n.jsxs)("div",{style:{marginTop:10},children:[(0,n.jsx)("div",{style:{fontWeight:700,marginBottom:8},children:"Vision Model:"}),(0,n.jsxs)("select",{value:t.ai.visionModel,onChange:e=>i("ai","visionModel",e.target.value),style:{width:"100%",padding:"10px 12px",borderRadius:12,border:"1px solid #e5e7eb",fontWeight:700},children:[(0,n.jsx)("option",{value:"yolo",children:"YOLO v8 (Fast)"}),(0,n.jsx)("option",{value:"custom",children:"Custom Model (Accurate)"}),(0,n.jsx)("option",{value:"hybrid",children:"Hybrid (Balanced)"})]})]})]})})]})}function x(e){let{settings:t}=e,[i,o]=(0,l.useState)({gather:!0,farmTiles:!0,upgradeWorkers:!0,heal:!0});return(0,n.jsxs)(r,{title:"Farming routine",subtitle:"Daily checklist (manual tracking)",children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:12},children:[(0,n.jsx)("div",{style:{fontWeight:900},children:"Auto-farming:"}),(0,n.jsx)(s,{label:t.autoFarm?"ENABLED":"DISABLED",icon:t.autoFarm?"✅":"❌",bg:t.autoFarm?"#dcfce7":"#fee2e2",color:t.autoFarm?"#166534":"#991b1b"})]}),(0,n.jsxs)("label",{style:k(),children:[(0,n.jsx)("input",{type:"checkbox",checked:i.gather,onChange:e=>o({...i,gather:e.target.checked})}),(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"Gather resources"})," — send marches to nearest rich nodes"]})]}),(0,n.jsxs)("label",{style:k(),children:[(0,n.jsx)("input",{type:"checkbox",checked:i.farmTiles,onChange:e=>o({...i,farmTiles:e.target.checked})}),(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"Farm map tiles"})," — rotate zones to avoid over-farming one area"]})]}),(0,n.jsxs)("label",{style:k(),children:[(0,n.jsx)("input",{type:"checkbox",checked:i.upgradeWorkers,onChange:e=>o({...i,upgradeWorkers:e.target.checked})}),(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"Upgrade economy"})," — queue upgrades for farm/production buildings"]})]}),(0,n.jsxs)("label",{style:k(),children:[(0,n.jsx)("input",{type:"checkbox",checked:i.heal,onChange:e=>o({...i,heal:e.target.checked})}),(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"Heal + hospital"})," — keep capacity safe before rallies"]})]}),(0,n.jsx)("div",{style:{marginTop:12,padding:12,borderRadius:14,border:"1px solid #e5e7eb",background:"#f8fafc",color:"#374151",fontWeight:700,fontSize:13},children:"✅ This section is a planner/checklist. (No ban-bypass features.)"})]})}function f(e){let{settings:t}=e,[i,o]=(0,l.useState)(1),d=t.targetLevel,c=Math.max(0,Math.min(100,Math.round(i/d*100)));return(0,n.jsx)(r,{title:"Build planner",subtitle:"From level 1 → ".concat(d," (plan + notes)"),children:(0,n.jsxs)("div",{style:{display:"grid",gap:10},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:10},children:[(0,n.jsx)("div",{style:{fontWeight:900},children:"Auto-build:"}),(0,n.jsx)(s,{label:t.autoBuild?"ENABLED":"DISABLED",icon:t.autoBuild?"✅":"❌",bg:t.autoBuild?"#dcfce7":"#fee2e2",color:t.autoBuild?"#166534":"#991b1b"}),(0,n.jsxs)("div",{style:{color:"#6b7280",fontSize:12},children:["Priority: ",t.priorityBuilding]})]}),(0,n.jsx)("div",{style:{fontWeight:900},children:"Current farm level"}),(0,n.jsxs)("div",{style:{display:"flex",gap:10,alignItems:"center",flexWrap:"wrap"},children:[(0,n.jsx)(a,{variant:"ghost",onClick:()=>o(e=>Math.max(1,e-1)),children:"−"}),(0,n.jsx)("div",{style:{fontSize:28,fontWeight:950},children:i}),(0,n.jsx)(a,{variant:"ghost",onClick:()=>o(e=>Math.min(d,e+1)),children:"+"}),(0,n.jsxs)("div",{style:{color:"#6b7280",fontWeight:800},children:["Target: ",d]})]}),(0,n.jsx)("div",{style:{height:10,background:"#e5e7eb",borderRadius:999,overflow:"hidden"},children:(0,n.jsx)("div",{style:{width:"".concat(c,"%"),height:"100%",background:"#111827"}})}),(0,n.jsxs)("div",{style:{fontSize:13,color:"#374151",fontWeight:700},children:["Suggested focus: ",(0,n.jsx)("b",{children:"HQ/Stronghold requirements"})," + production + troop capacity."]}),(0,n.jsxs)("div",{style:{marginTop:10},children:[(0,n.jsx)("div",{style:{fontWeight:700,marginBottom:8},children:"Upgrade Queue:"}),(0,n.jsx)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:t.upgradeQueue.map((e,t)=>(0,n.jsx)(s,{label:e,icon:0===t?"\uD83D\uDE80":"\uD83D\uDCCA",bg:0===t?"#dbeafe":"#f3f4f6",color:0===t?"#1e40af":"#374151"},t))})]}),(0,n.jsx)("textarea",{placeholder:"Notes (next upgrades, missing requirements, timers...)",style:{width:"100%",minHeight:120,borderRadius:14,border:"1px solid #e5e7eb",padding:12,outline:"none",fontWeight:700}})]})})}function y(e){let{settings:t}=e,[i,d]=(0,l.useState)("monsters");return(0,n.jsxs)(r,{title:"Rally planner",subtitle:"Monsters + support rallies (planning)",children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:12},children:[(0,n.jsx)("div",{style:{fontWeight:900},children:"Auto-hunt:"}),(0,n.jsx)(s,{label:t.huntMonsters?"ENABLED":"DISABLED",icon:t.huntMonsters?"✅":"❌",bg:t.huntMonsters?"#dcfce7":"#fee2e2",color:t.huntMonsters?"#166534":"#991b1b"}),(0,n.jsxs)("div",{style:{color:"#6b7280",fontSize:12},children:["Strength: ",t.monsterStrength]})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:12},children:[(0,n.jsx)(a,{variant:"monsters"===i?"primary":"ghost",onClick:()=>d("monsters"),children:"⚔️ Monsters"}),(0,n.jsx)(a,{variant:"support"===i?"primary":"ghost",onClick:()=>d("support"),children:"\uD83D\uDEE1️ Support"})]}),"monsters"===i?(0,n.jsxs)("div",{style:{display:"grid",gap:10},children:[(0,n.jsx)(o,{left:"Goal",right:"Farm XP + loot efficiently"}),(0,n.jsx)(o,{left:"Tip",right:"Use strongest march, watch stamina"}),(0,n.jsx)(o,{left:"Checklist",right:"Scout → rally → heal → repeat"})]}):(0,n.jsxs)("div",{style:{display:"grid",gap:10},children:[(0,n.jsx)(o,{left:"Goal",right:"Support alliance rallies"}),(0,n.jsx)(o,{left:"Tip",right:"Set time windows + notify group"}),(0,n.jsx)(o,{left:"Checklist",right:"Join → send support → return"})]}),(0,n.jsx)("div",{style:{marginTop:12},children:(0,n.jsx)("textarea",{placeholder:"Plan for today's rallies (times, targets, notes)",style:{width:"100%",minHeight:110,borderRadius:14,border:"1px solid #e5e7eb",padding:12,outline:"none",fontWeight:700}})})]})}function b(e){let{settings:t}=e,[i,o]=(0,l.useState)(0),[a,d]=(0,l.useState)(0),[c,h]=(0,l.useState)(0),[g,u]=(0,l.useState)(0);return(0,n.jsxs)(r,{title:"Resources tracker",subtitle:"Manual tracking (for planning)",children:[(0,n.jsxs)("div",{style:{display:"grid",gap:10,marginBottom:12},children:[D("\uD83E\uDEB5 Wood",i,o,t.gatherWood),D("\uD83C\uDF5E Food",a,d,t.gatherFood),D("\uD83E\uDEA8 Stone",c,h,t.gatherStone),D("\uD83E\uDE99 Gold",g,u,t.gatherGold)]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:12},children:[(0,n.jsx)("div",{style:{fontWeight:900},children:"Auto-collect:"}),(0,n.jsx)(s,{label:t.autoCollect?"ENABLED":"DISABLED",icon:t.autoCollect?"✅":"❌",bg:t.autoCollect?"#dcfce7":"#fee2e2",color:t.autoCollect?"#166534":"#991b1b"})]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:10},children:[(0,n.jsx)(v,{label:"Total",value:i+a+c+g}),(0,n.jsx)(v,{label:"Priority",value:"HQ reqs"}),(0,n.jsx)(v,{label:"Next",value:"Upgrade queue"})]})]})}function j(e){let{settings:t}=e,[i,o]=(0,l.useState)({dailyMail:!1,allianceGifts:!1,events:!1,store:!1});return(0,n.jsxs)(r,{title:"Mail & gifts",subtitle:"Collect daily rewards + messages",children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:12},children:[(0,n.jsx)("div",{style:{fontWeight:900},children:"Auto-send gifts:"}),(0,n.jsx)(s,{label:t.autoSendGifts?"ENABLED":"DISABLED",icon:t.autoSendGifts?"✅":"❌",bg:t.autoSendGifts?"#dcfce7":"#fee2e2",color:t.autoSendGifts?"#166534":"#991b1b"})]}),(0,n.jsxs)("label",{style:k(),children:[(0,n.jsx)("input",{type:"checkbox",checked:i.dailyMail,onChange:e=>o({...i,dailyMail:e.target.checked})}),(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"Daily mail"})," — claim all rewards"]})]}),(0,n.jsxs)("label",{style:k(),children:[(0,n.jsx)("input",{type:"checkbox",checked:i.allianceGifts,onChange:e=>o({...i,allianceGifts:e.target.checked})}),(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"Alliance gifts"})," — open + share notes"]})]}),(0,n.jsxs)("label",{style:k(),children:[(0,n.jsx)("input",{type:"checkbox",checked:i.events,onChange:e=>o({...i,events:e.target.checked})}),(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"Events"})," — check limited tasks"]})]}),(0,n.jsxs)("label",{style:k(),children:[(0,n.jsx)("input",{type:"checkbox",checked:i.store,onChange:e=>o({...i,store:e.target.checked})}),(0,n.jsxs)("span",{children:[(0,n.jsx)("b",{children:"Store"})," — free packs / weekly items"]})]}),(0,n.jsxs)("div",{style:{marginTop:10,color:"#6b7280",fontWeight:700,fontSize:13},children:['Default gift message: "',t.giftMessage,'"']}),(0,n.jsx)("textarea",{placeholder:"Notes / messages to remember...",style:{width:"100%",minHeight:110,borderRadius:14,border:"1px solid #e5e7eb",padding:12,outline:"none",fontWeight:700,marginTop:8}})]})}function m(e){let{settings:t}=e,[i,o]=(0,l.useState)(""),[d,c]=(0,l.useState)([{role:"ai",text:"Ask me for a farming/build/rally plan. (Safe helper—no ban-bypass.)"}]),[h,g]=(0,l.useState)(!1);async function u(){let e=i.trim();if(e&&!h){o(""),c(t=>[...t,{role:"user",text:e}]),g(!0);try{let t=await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})}),i=await t.json();c(e=>{var t;return[...e,{role:"ai",text:null!==(t=i.reply)&&void 0!==t?t:"OK"}]})}catch(e){c(e=>[...e,{role:"ai",text:"Error: failed to reach AI endpoint."}])}finally{g(!1)}}}return(0,n.jsxs)(r,{title:"AI helper",subtitle:"Planning + guidance",children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:12},children:[(0,n.jsx)("div",{style:{fontWeight:900},children:"AI Status:"}),(0,n.jsx)(s,{label:t.enabled?"ACTIVE":"INACTIVE",icon:t.enabled?"\uD83E\uDD16":"\uD83D\uDCA4",bg:t.enabled?"#dcfce7":"#f3f4f6",color:t.enabled?"#166534":"#374151"}),(0,n.jsxs)("div",{style:{color:"#6b7280",fontSize:12},children:["Model: ",t.visionModel]})]}),(0,n.jsx)("div",{style:{border:"1px solid #e5e7eb",borderRadius:14,padding:12,background:"#f8fafc",maxHeight:260,overflow:"auto"},children:d.map((e,t)=>(0,n.jsx)("div",{style:{display:"flex",justifyContent:"user"===e.role?"flex-end":"flex-start",marginBottom:10},children:(0,n.jsx)("div",{style:{maxWidth:"85%",padding:"10px 12px",borderRadius:14,fontWeight:700,background:"user"===e.role?"#111827":"#fff",color:"user"===e.role?"#fff":"#111827",border:"user"===e.role?"1px solid #111827":"1px solid #e5e7eb"},children:e.text})},t))}),(0,n.jsxs)("div",{style:{display:"flex",gap:10,marginTop:10,flexWrap:"wrap"},children:[(0,n.jsx)("input",{value:i,onChange:e=>o(e.target.value),placeholder:"e.g., give me a level 1→17 build plan...",style:{flex:1,minWidth:220,padding:"12px 12px",borderRadius:14,border:"1px solid #e5e7eb",outline:"none",fontWeight:700}}),(0,n.jsx)(a,{onClick:u,children:h?"…":"Send"})]})]})}function v(e){let{label:t,value:i}=e;return(0,n.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:14,padding:12,background:"#fff"},children:[(0,n.jsx)("div",{style:{color:"#6b7280",fontSize:12,fontWeight:900},children:t}),(0,n.jsx)("div",{style:{marginTop:6,fontSize:18,fontWeight:950},children:i})]})}function k(){return{display:"flex",gap:10,alignItems:"flex-start",padding:"10px 0",borderBottom:"1px solid #f1f5f9",fontWeight:700,color:"#111827"}}function D(e,t,i,l){return(0,n.jsxs)("div",{style:{display:"flex",gap:10,alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #f1f5f9",padding:"10px 0",opacity:l?1:.6},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,n.jsx)("div",{style:{fontWeight:900},children:e}),!l&&(0,n.jsx)("span",{style:{fontSize:10,color:"#6b7280",fontWeight:800},children:"(disabled)"})]}),(0,n.jsx)("input",{type:"number",value:t,onChange:e=>i(Number(e.target.value||0)),disabled:!l,style:{width:160,maxWidth:"45vw",padding:"10px 12px",borderRadius:12,border:"1px solid #e5e7eb",outline:"none",fontWeight:900,textAlign:"right",background:l?"#fff":"#f3f4f6"}})]})}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=1308)}),_N_E=e.O()}]);