"use strict";(()=>{var e={};e.id=225,e.ids=[225],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},450:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>m,originalPathname:()=>v,patchFetch:()=>b,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>l,staticGenerationBailout:()=>h});var s={};r.r(s),r.d(s,{POST:()=>p});var a=r(5419),i=r(9108),o=r(9678),u=r(8070),n=r(6569);async function p(e){let{email:t,plan:r}=await e.json();if(!t||!r)return u.Z.json({error:"Invalid input"},{status:400});let{data:s,error:a}=await n.p.from("users").select("id").eq("email",t).single();return a||!s?u.Z.json({error:"User not found"},{status:404}):(await n.p.from("subscriptions").update({plan:r}).eq("user_id",s.id),u.Z.json({ok:!0}))}let d=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/subscription/upgrade/route",pathname:"/api/subscription/upgrade",filename:"route",bundlePath:"app/api/subscription/upgrade/route"},resolvedPagePath:"/workspaces/vrbot-site/app/api/subscription/upgrade/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:l,serverHooks:g,headerHooks:m,staticGenerationBailout:h}=d,v="/api/subscription/upgrade/route";function b(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:l})}},6569:(e,t,r)=>{r.d(t,{p:()=>s});let s=(0,r(3950).eI)("https://xmanyfpojzkjlwatkrcc.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{persistSession:!1}})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,206,950],()=>r(450));module.exports=s})();