"use strict";(()=>{var e={};e.id=3225,e.ids=[3225],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},450:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>v,originalPathname:()=>m,patchFetch:()=>f,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>l,staticGenerationBailout:()=>h});var s={};r.r(s),r.d(s,{POST:()=>p});var a=r(5419),o=r(9108),i=r(9678),n=r(8070),u=r(1010);async function p(e){let{email:t,plan:r}=await e.json();if(!t||!r)return n.Z.json({error:"Invalid input"},{status:400});let{data:s,error:a}=await u.p.from("users").select("id").eq("email",t).single();return a||!s?n.Z.json({error:"User not found"},{status:404}):(await u.p.from("subscriptions").update({plan:r}).eq("user_id",s.id),n.Z.json({ok:!0}))}let d=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/subscription/upgrade/route",pathname:"/api/subscription/upgrade",filename:"route",bundlePath:"app/api/subscription/upgrade/route"},resolvedPagePath:"/workspaces/vrbot-site/app/api/subscription/upgrade/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:l,serverHooks:g,headerHooks:v,staticGenerationBailout:h}=d,m="/api/subscription/upgrade/route";function f(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:l})}},1010:(e,t,r)=>{r.d(t,{p:()=>s});let s=(0,r(3950).eI)(process.env.SUPABASE_URL,process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[1638,6206,3950],()=>r(450));module.exports=s})();