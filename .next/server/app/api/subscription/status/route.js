"use strict";(()=>{var e={};e.id=494,e.ids=[494],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2397:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>x,originalPathname:()=>v,patchFetch:()=>h,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>f});var s={};r.r(s),r.d(s,{GET:()=>c,dynamic:()=>l});var n=r(5419),a=r(9108),i=r(9678),o=r(8070),u=r(6569);let l="force-dynamic";async function c(){let e=(0,u.j)(),{data:t,error:r}=await e.auth.getUser();if(r||!t?.user)return o.Z.json({plan:"free",userId:null,email:null},{status:200});let s=t.user,{data:n,error:a}=await e.from("subscriptions").select("plan,status,current_period_end").eq("user_id",s.id).maybeSingle();if(a)return o.Z.json({plan:"free",userId:s.id,email:s.email??null},{status:200});let i=n?.status??null,l=n?.plan==="pro"&&("active"===i||"trialing"===i)?"pro":"free";return o.Z.json({plan:l,status:i,currentPeriodEnd:n?.current_period_end??null,userId:s.id,email:s.email??null})}let p=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/subscription/status/route",pathname:"/api/subscription/status",filename:"route",bundlePath:"app/api/subscription/status/route"},resolvedPagePath:"/workspaces/vrbot-site/app/api/subscription/status/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:g,headerHooks:x,staticGenerationBailout:f}=p,v="/api/subscription/status/route";function h(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},6569:(e,t,r)=>{r.d(t,{j:()=>a});var s=r(7439),n=r(7497);function a(){let e=(0,s.cookies)(),t=process.env.SUPABASE_URL,r=process.env.SUPABASE_ANON_KEY;return(0,n.createServerClient)(t,r,{cookies:{getAll:()=>e.getAll(),setAll(t){try{t.forEach(({name:t,value:r,options:s})=>{e.set(t,r,s)})}catch{}}}})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,206,950,677],()=>r(2397));module.exports=s})();