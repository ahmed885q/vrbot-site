"use strict";(()=>{var e={};e.id=5789,e.ids=[5789],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},1147:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>v,originalPathname:()=>_,patchFetch:()=>k,requestAsyncStorage:()=>m,routeModule:()=>g,serverHooks:()=>f,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>S});var s={};r.r(s),r.d(s,{POST:()=>c,runtime:()=>l});var a=r(5419),o=r(9108),n=r(9678),i=r(8070),p=r(6113),u=r.n(p),d=r(1010);let l="nodejs";async function c(e){let t=await e.json().catch(()=>({})),r=String(t?.token??"").trim(),s=String(t?.message??"").trim(),a=String(t?.level??"info").trim(),o=t?.farmId?String(t.farmId):null;if(!r||!s)return i.Z.json({error:"Missing token/message"},{status:400});let n=u().createHash("sha256").update(r).digest("hex"),{data:p}=await d.p.from("bot_devices").select("id,user_id").eq("token_hash",n).maybeSingle();if(!p)return i.Z.json({error:"Invalid token"},{status:401});let{error:l}=await d.p.from("bot_logs").insert({user_id:p.user_id,farm_id:o,level:a,message:s});return l?i.Z.json({error:l.message},{status:500}):i.Z.json({ok:!0})}let g=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/logs/append/route",pathname:"/api/logs/append",filename:"route",bundlePath:"app/api/logs/append/route"},resolvedPagePath:"/workspaces/vrbot-site/app/api/logs/append/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:f,headerHooks:v,staticGenerationBailout:S}=g,_="/api/logs/append/route";function k(){return(0,n.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:h})}},1010:(e,t,r)=>{r.d(t,{p:()=>s});let s=(0,r(3950).eI)(process.env.SUPABASE_URL,process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[1638,6206,3950],()=>r(1147));module.exports=s})();