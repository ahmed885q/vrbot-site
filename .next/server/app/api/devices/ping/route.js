"use strict";(()=>{var e={};e.id=4351,e.ids=[4351],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},7035:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>S,originalPathname:()=>k,patchFetch:()=>_,requestAsyncStorage:()=>g,routeModule:()=>v,serverHooks:()=>m,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>f});var s={};r.r(s),r.d(s,{POST:()=>l,runtime:()=>c});var a=r(5419),i=r(9108),o=r(9678),n=r(8070),u=r(6113),p=r.n(u),d=r(1010);let c="nodejs";async function l(e){let t=await e.json().catch(()=>({})),r=String(t?.token??"").trim();if(!r)return n.Z.json({error:"Missing token"},{status:400});let s=p().createHash("sha256").update(r).digest("hex"),{data:a,error:i}=await d.p.from("bot_devices").select("id,user_id").eq("token_hash",s).maybeSingle();if(i)return n.Z.json({error:i.message},{status:500});if(!a)return n.Z.json({error:"Invalid token"},{status:401});let{error:o}=await d.p.from("bot_devices").update({last_seen_at:new Date().toISOString()}).eq("id",a.id);return o?n.Z.json({error:o.message},{status:500}):n.Z.json({ok:!0})}let v=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/devices/ping/route",pathname:"/api/devices/ping",filename:"route",bundlePath:"app/api/devices/ping/route"},resolvedPagePath:"/workspaces/vrbot-site/app/api/devices/ping/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:g,staticGenerationAsyncStorage:h,serverHooks:m,headerHooks:S,staticGenerationBailout:f}=v,k="/api/devices/ping/route";function _(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:h})}},1010:(e,t,r)=>{r.d(t,{p:()=>s});let s=(0,r(3950).eI)(process.env.SUPABASE_URL,process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[1638,6206,3950],()=>r(7035));module.exports=s})();